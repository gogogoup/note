(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{329:function(e,t,n){"use strict";n.r(t);var i=n(33),r=Object(i.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"_2019-09-26"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2019-09-26"}},[e._v("#")]),e._v(" 2019-09-26")]),e._v(" "),n("p",[e._v("CET的todo模块在新增TODO的input中增加enter提交功能"),n("br"),e._v("\n这个听起来很简单，就是keyup事件嘛，但其实有个很麻烦的点:")]),e._v(" "),n("ul",[n("li",[e._v("在填写的时候，大部分情况都是中英文混合输入。而输入法一般会在按了enter键之后输入用户敲的英文，在按空格键的时候输入备选的中文。")]),e._v(" "),n("li",[e._v("单纯监听键盘的enter输入就会出现：在混合输入时，用户想输入对应英文却触发提交的操作。")]),e._v(" "),n("li",[e._v("解决方式：\n"),n("ul",[n("li",[e._v("需要区分“中英文混合输入状态下输入英文时按下的enter”和“完成输入时为了提交按下的enter键”两种情况。")]),e._v(" "),n("li",[e._v("如何判断用户是在混合输入：\n"),n("ul",[n("li",[e._v("需要监听input的compositionstart/compositionend事件。\n"),n("ul",[n("li",[e._v("当用户在非直接输入法中进行输入时，会出现结果备选项，此时会触发compositionstart事件，将标记设为true。标记为true时任何的键盘enter事件触发都不会进行提交操作。")]),e._v(" "),n("li",[e._v("然后用户完成输入（此时包括已经选择了备选项/esc退出输入备选项），备选项消失，会触发compositionend事件，将标记设为false。")])])]),e._v(" "),n("li",[e._v("需要注意的是，此时，用户按了enter键来选择英文，实际上也还是让备选项消失了，所以还是会触发compositionend事件，标记就为false了，然后再触发enter事件，导致提交。")]),e._v(" "),n("li",[e._v("所以就要延时来将标记设为false，使得enter事件触发时标记依然为false，以此来保证“中英文混合输入状态下输入英文时按下的enter”不去提交。")])])]),e._v(" "),n("li",[e._v("剩下的enter事件，就是用户希望进行提交操作了。")])])])])])}),[],!1,null,null,null);t.default=r.exports}}]);